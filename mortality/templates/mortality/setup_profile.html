{% extends 'mortality/base.html' %}

{% block title %}Setup Your Death Clock - DeathClock{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-10">
        <div class="card">
            <div class="card-header text-center">
                <h3>‚ö∞Ô∏è Configure Your Death Clock</h3>
                <p class="mb-0">We'll calculate your life expectancy based on science and brutal honesty</p>
            </div>
            <div class="card-body">
                <div class="alert alert-warning mb-4">
                    <h6>‚ö†Ô∏è Be Brutally Honest</h6>
                    <p class="mb-0">Our algorithm will calculate your life expectancy based on proven mortality factors. Lying only cheats yourself out of the truth.</p>
                </div>
                
                <form method="post">
                    {% csrf_token %}
                    
                    <!-- Basic Information -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5>üìã Basic Information</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <label for="{{ form.birth_date.id_for_label }}" class="form-label">{{ form.birth_date.label }}</label>
                                    {{ form.birth_date }}
                                    {% if form.birth_date.errors %}
                                        <div class="text-danger">{{ form.birth_date.errors }}</div>
                                    {% endif %}
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label for="{{ form.gender.id_for_label }}" class="form-label">{{ form.gender.label }}</label>
                                    {{ form.gender }}
                                    {% if form.gender.errors %}
                                        <div class="text-danger">{{ form.gender.errors }}</div>
                                    {% endif %}
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label for="{{ form.country.id_for_label }}" class="form-label">{{ form.country.label }}</label>
                                    {{ form.country }}
                                    {% if form.country.errors %}
                                        <div class="text-danger">{{ form.country.errors }}</div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Health Habits -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5>üö¨ Destructive Habits</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="{{ form.smoking_status.id_for_label }}" class="form-label">{{ form.smoking_status.label }}</label>
                                    {{ form.smoking_status }}
                                    {% if form.smoking_status.errors %}
                                        <div class="text-danger">{{ form.smoking_status.errors }}</div>
                                    {% endif %}
                                    <div class="form-text">Heavy smoking can reduce life by 10+ years</div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="{{ form.drinking_habits.id_for_label }}" class="form-label">{{ form.drinking_habits.label }}</label>
                                    {{ form.drinking_habits }}
                                    {% if form.drinking_habits.errors %}
                                        <div class="text-danger">{{ form.drinking_habits.errors }}</div>
                                    {% endif %}
                                    <div class="form-text">Heavy drinking reduces life by 5+ years</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Physical Health -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5>üí™ Physical Health</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <label for="{{ form.exercise_frequency.id_for_label }}" class="form-label">{{ form.exercise_frequency.label }}</label>
                                    {{ form.exercise_frequency }}
                                    {% if form.exercise_frequency.errors %}
                                        <div class="text-danger">{{ form.exercise_frequency.errors }}</div>
                                    {% endif %}
                                    <div class="form-text">Regular exercise adds 3-5 years</div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label for="{{ form.bmi_category.id_for_label }}" class="form-label">{{ form.bmi_category.label }}</label>
                                    {{ form.bmi_category }}
                                    {% if form.bmi_category.errors %}
                                        <div class="text-danger">{{ form.bmi_category.errors }}</div>
                                    {% endif %}
                                    <div class="form-text">Obesity reduces life by 6+ years</div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label for="{{ form.sleep_quality.id_for_label }}" class="form-label">{{ form.sleep_quality.label }}</label>
                                    {{ form.sleep_quality }}
                                    {% if form.sleep_quality.errors %}
                                        <div class="text-danger">{{ form.sleep_quality.errors }}</div>
                                    {% endif %}
                                    <div class="form-text">Poor sleep reduces life by 4+ years</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Mental & Social Health -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5>üß† Mental & Social Health</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <label for="{{ form.stress_level.id_for_label }}" class="form-label">{{ form.stress_level.label }}</label>
                                    {{ form.stress_level }}
                                    {% if form.stress_level.errors %}
                                        <div class="text-danger">{{ form.stress_level.errors }}</div>
                                    {% endif %}
                                    <div class="form-text">High stress (8-10) reduces life significantly</div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="form-check mt-4">
                                        {{ form.social_connections }}
                                        <label class="form-check-label" for="{{ form.social_connections.id_for_label }}">
                                            {{ form.social_connections.label }}
                                        </label>
                                    </div>
                                    {% if form.social_connections.errors %}
                                        <div class="text-danger">{{ form.social_connections.errors }}</div>
                                    {% endif %}
                                    <div class="form-text">Social isolation reduces life by 4+ years</div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label for="{{ form.family_longevity.id_for_label }}" class="form-label">{{ form.family_longevity.label }}</label>
                                    {{ form.family_longevity }}
                                    {% if form.family_longevity.errors %}
                                        <div class="text-danger">{{ form.family_longevity.errors }}</div>
                                    {% endif %}
                                    <div class="form-text">Genetics account for 25% of longevity</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="d-grid">
                        <button type="submit" class="btn btn-danger btn-lg">Calculate My Death Clock</button>
                    </div>
                </form>
            </div>
        </div>
        
        <div class="alert alert-info mt-4">
            <h6>üßÆ How We Calculate Your Life Expectancy</h6>
            <p class="mb-2">Our algorithm considers:</p>
            <ul class="mb-0">
                <li><strong>Base country life expectancy</strong> - Starting point based on healthcare and environment</li>
                <li><strong>Gender</strong> - Women typically live 5 years longer than men</li>
                <li><strong>Lifestyle factors</strong> - Smoking, drinking, exercise, BMI, sleep</li>
                <li><strong>Genetics</strong> - Family longevity history</li>
                <li><strong>Mental health</strong> - Stress levels and social connections</li>
            </ul>
        </div>
    </div>
</div>
{% endblock %}